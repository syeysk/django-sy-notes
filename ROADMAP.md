# Дорожная карта

## Разработка

### Ключевые пункты - функционал

- [x] Сделать интерфейс для добавления внешних баз заметок: Typesense, Firebase
- [x] Сделать интерфейс для импорта/экспорта заметок: из одной базы в другую. очистка базы
- [ ] Сделать интерфейс для импорта/экспорта заметок: архив с файлами, Github
  - при экспорте хранилища в архив помещать и файл-настройки в формате Obsidian, содержащий название хранилища
- [ ] Сделать интерфейс для настройки хука автообновления базы при добавлении новой заметки на Github
- [x] Сделать интерфейс для просмотра списка заметок
- [x] Сделать интерфейс для просмотра/редактирования заметки. Результат: [Первый коммит](https://github.com/syeysk/django-sy-notes/commit/1164961be997ad3a040a4e7cefabad85ca6cc1f8), [Последний коммит](https://github.com/syeysk/django-sy-notes/commit/4eec4009580c53cf1e6574506ddec52ffcdf04dd), [Коммит с markdown-парсером для просмотра заметок](https://github.com/syeysk/django-sy-notes/commit/a066f68385ea992cc2a87d70e6c65ca3a105f956)
- [x] Сделать интерфейс для добавления заметки. Результат: [Первый коммит](https://github.com/syeysk/django-sy-notes/commit/d67586ae25c927977b69c2426b7c2123de3e8fd2)
- [ ] Добавить механизм для импорта заметки внешними сервисами (холст фасилитации, дорожная карта, сканер книг и т. д.)
- [ ] Написать расширение для Obsidian - для локального использования заметок и их импорт в микросервис
- [ ] Написать адаптер внешней базы для Яндекс.Диска
- [ ] Написать адаптер внешней базы для хранения заметок в файловой системе
- [ ] На странице заметки - кнопка для скачивания заметки в PDF или Markdown
- [ ] Добавить поддержку мультиязычности, выполнить перевод на английский язык
- [ ] Вести историю изменений заметок: историю делать модулем [difflib](https://docs.python.org/3/library/difflib.html).
  Добавить отдельную модель с полями: модель, поле, дельта, пользователь, было ли изменения приняты модераторами
- [ ] Добавить окошко для редактирования yaml-содержимого (мета-информации) заметки
- [ ] Сделать отображение мета-информации о заметке на странице заметки
- [ ] Сделать поддержку LaTeX в заметках (например `$\ce{C=C}$`)
  - Примеры для химии (расширение mhchem): https://mhchem.github.io/MathJax-mhchem/
  - Описание расширения mchchem: https://docs.mathjax.org/en/latest/input/tex/extensions/mhchem.html
  - Расширения, поддерживаемы Obsidian: https://docs.mathjax.org/en/latest/input/tex/extensions/index.html
  - ОписаниеJavascript-библиотеки MathJax для интерпретации LaTeX: https://docs.mathjax.org/en/latest/basic/mathjax.html
  - Описание формата Markdown в Obsidian, который должен поддерживать и микросервис: https://publish.obsidian.md/help-ru/%D0%A0%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%B0/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5+%D0%B7%D0%B0%D0%BC%D0%B5%D1%82%D0%BE%D0%BA
- [ ] ссылка на заметку в другом хранилище должна выглядеть так: `[Ссылка на файл](obsidian://open?vault=MainVault&file=MyNote.md)`
- [ ] добавить возможность загружать картинки в хранилище
- [ ] возможность делать форки хранилищ

### Ключевые пункты - техническое

- [x] Настроить локальный запуск. Результат: [коммит](https://github.com/syeysk/django-sy-notes/commit/db9a40eced5dd4e6e393a05dd815d6de8c35b966)
- [x] Настроить запуск на сервере
- [ ] Внедрить Poetry
- [ ] Настроить Docker-контейнер
- [ ] Тесты для API
- [ ] Тесты для веб-интерфейса

### Технический долг

- [x] Поиск заметок на странице списка заметок
- [ ] Поиск заметок по хештегу
- [ ] На странице заметок хештеги должны быть ссылками на страницу поиска по этому же хештегу
- [ ] В подсветке синтаксиса Markdown сделать динамическую подгрузку подсветки встроенного исходного языков
  https://codemirror.net/5/doc/manual.html#fromTextArea:~:text=of%20this%20method.-,Module%20loaders,-The%20files%20in
- [ ] Если пользователь неавторизован, то скрывать поля "Сохранить" и "Данные для подключения" на странице редактирования хранилища
- [ ] Добавить в редактор кнопки для вставки текста: курсив, ссылка, подчёркнутый, зачёркнутый, жирный, изменение регистра
- [ ] При добавлении заметки: кнопка "Отменить" должна возвращать на предыдущую страницу
- [ ] При добавлении заметки: Заголовок "Новая заметка" вместо пустого заголовка
- [ ] При копировании заметок из одной базы в другую нужно не очищать заметки, а проверять наличие дублей по заголовку. Пользователю сообщать о дублях с предложением перезаписать/отклонить заметку
- [ ] При копировании заметок из одной базы в другую: добавить галку очистки базы
- [ ] При очищении базы вывести предупреждение о необратимости действия и запросить подтверждение у пользователя
- [ ] На странице списка заметок центрировать пагинатор, привести в нормальный вид
- [ ] При импорте/экспорте уведомлять пользователя об успешном завершении действия
- [ ] В адаптер заметок Django добавить опцию "path" в credentials (проверять его уникальность)
- [ ] На странице списка заметок обрезать заметки средствами базы, а не в шаблоне

## Безопасность

- [ ] Сейчас есть проблема: пользователь может редактировать чужую заметку.
  Это можно исправить, сверяя пользователя с автором хранилища. Такой подход лишит микросервис общности.
  Решением будет реализация мехнизма модерации и принятия правок атвором хранилища. Таким образом любой пользователь
  сможет предлагать правки к любым заметкам, но не факт, что эти правки будут одобрены сообществом/автором
- [ ] Разрешить source, содержащие только символы, допустимые для наименования файлов в Windows и Linux, сделать их регистронезависимыми
- [ ] Запретить создавать source, начинающиеся с '.' (это служебные объекты, создаваемы и изменяемые автоматически)
- [ ] Запретить редактировать source и заметки, начинающиеся с '.'

## Маркетинг

- [x] Разработать логотип.  Результат: [Коммит с логотипом](https://github.com/syeysk/django-sy-notes/commit/d6d2f4a59bb0f497c8055116be4acf77a7cfa6df)
- [ ] Разработать заглавную промо-страницу

## Новый функционал

- [ ] Разместить ссылку на сканер заметок и книг
- [ ] Сделать публикацию заметки из сервиса в другие сервисы

## Финансовые операции

- [x] Приобрести доменное имя. Результат:
  ```sh
  whois cachebrain.fun
  ```

